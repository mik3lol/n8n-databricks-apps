{
  "name": "localtunnel-test",
  "version": "1.0.0",
  "description": "Test application for localtunnel with databricks apps",
  "main": "index.js",
  "dependencies": {
    "localtunnel": "^2.0.0",
    "n8n": "^1.90.0"
  },
  "scripts": {
    "tunnel": "lt --port 8000 --subdomain $(echo $WEBHOOK_URL | sed -E 's|https://([^.]+)\\.loca\\.lt|\\1|') | tee .webhook-url",
    "get-password": "echo \"Tunnel password (IP): $(curl -s https://loca.lt/mytunnelpassword)\"",
    "set-env": "while [ ! -s .webhook-url ]; do sleep 1; echo \"Waiting for tunnel...\"; done && rm .webhook-url",
    "n8n": "n8n",
    "start": "npm run get-password && npm run tunnel & npm run set-env && npm run n8n"
  }
}